<html>
<head>
<meta charset=utf-8 />
<title>PipeGeoJSON Demo</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src="https://api.mapbox.com/mapbox.js/v2.2.4/mapbox.js"></script>


<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
<link href='https://api.mapbox.com/mapbox.js/v2.2.4/mapbox.css' rel='stylesheet' />
<style>
  body { margin:0; padding:0; }
  #map { position:absolute; top:0; bottom:0; width:100%; }
</style>
</head>
<body>
<style>
table, th, td {
    border: 1px solid black;
}
</style>





<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'></script>

<div id='map'></div>

<script>
L.mapbox.accessToken = 'pk.eyJ1IjoibXVycGh5MjE0IiwiYSI6ImNpam5kb3puZzAwZ2l0aG01ZW1uMTRjbnoifQ.5Znb4MArp7v3Wwrn6WFE6A';
var map = L.mapbox.map('map', 'mapbox.streets',{
    center: [38, -102.0],
    zoom: 5
    });

// omnivore will AJAX-request this file behind the scenes and parse it: 

// note that there are considerations:
// - The file must either be on the same domain as the page that requests it,
//   or both the server it is requested from and the user's browser must
//   support CORS.

// Internally this uses the toGeoJSON library to decode the KML file
// into GeoJSON







function addDataToMap1(data, map) {
    var dataLayer = L.geoJson(data);
    dataLayer.addTo(map);
}
$.getJSON('http://localhost:8000/block.geojson',function(data) { addDataToMap1(data,map); });function addDataToMap1(data, map) {
    var dataLayer = L.geoJson(data, {
        onEachFeature: function(feature, layer) {            var popupText = "<table><tr><th>COUNT: </th><td>" + feature.properties['COUNT']+"</td></tr>";             var popupText = popupText+ "<tr><th>LAT4: </th><td>" + feature.properties['LAT4']+"</td></tr>";             var popupText = popupText+ "<tr><th>LAT1: </th><td>" + feature.properties['LAT1']+"</td></tr>";             var popupText = popupText+ "<tr><th>LAT3: </th><td>" + feature.properties['LAT3']+"</td></tr>";             var popupText = popupText+ "<tr><th>LAT2: </th><td>" + feature.properties['LAT2']+"</td></tr>";             var popupText = popupText+ "<tr><th>LONG3: </th><td>" + feature.properties['LONG3']+"</td></tr>";             var popupText = popupText+ "<tr><th>LONG2: </th><td>" + feature.properties['LONG2']+"</td></tr>";             var popupText = popupText+ "<tr><th>LONG1: </th><td>" + feature.properties['LONG1']+"</td></tr>";             var popupText = popupText+ "<tr><th>LONG4: </th><td>" + feature.properties['LONG4']+"</td></tr>";             var popupText = popupText+ "<tr><th>GEOHASH: </th><td>" + feature.properties['GEOHASH']+"</td></tr>"; 
	    		layer.setStyle({color: '#1766B5', weight: 3, opacity: 1});
	            layer.bindPopup(popupText, {autoPan:false, maxHeight:500, maxWidth:350} ); }
        });
    dataLayer.addTo(map);
}

function addDataToMap2(data, map) {
    var dataLayer = L.geoJson(data);
    dataLayer.addTo(map);
}
$.getJSON('http://localhost:8000/corners.geojson',function(data) { addDataToMap2(data,map); });function addDataToMap2(data, map) {
    var dataLayer = L.geoJson(data, {
        onEachFeature: function(feature, layer) {            var popupText = "<table><tr><th>BLUE: </th><td>" + feature.properties['BLUE']+"</td></tr>";             var popupText = popupText+ "<tr><th>LONG: </th><td>" + feature.properties['LONG']+"</td></tr>";             var popupText = popupText+ "<tr><th>Y: </th><td>" + feature.properties['Y']+"</td></tr>";             var popupText = popupText+ "<tr><th>GEOHASH: </th><td>" + feature.properties['GEOHASH']+"</td></tr>";             var popupText = popupText+ "<tr><th>X: </th><td>" + feature.properties['X']+"</td></tr>";             var popupText = popupText+ "<tr><th>LAT: </th><td>" + feature.properties['LAT']+"</td></tr>";             var popupText = popupText+ "<tr><th>GREEN: </th><td>" + feature.properties['GREEN']+"</td></tr>";             var popupText = popupText+ "<tr><th>RED: </th><td>" + feature.properties['RED']+"</td></tr>"; 				layer.setIcon(L.mapbox.marker.icon({'marker-color': '#1766B5'}))
	            layer.bindPopup(popupText, {autoPan:false, maxHeight:500, maxWidth:350} ); }
        });
    dataLayer.addTo(map);
}

</script>


</body>
</html>