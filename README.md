# raster_extract - Raster Extraction to point cloud / vector data for merged rgb band, tif files.

*Below shows an output of dataframe generated in mapbox map.*
![](https://cloud.githubusercontent.com/assets/10904982/15654866/a59b6e3c-2665-11e6-8926-6dd5cd2e0257.png)

Raster extract is a tool similiar to rasterio but was made with different use cases in mind like developing geospatial algorithms binding/fusing different data sets with or to raster data by using a pandas dataframe and a few functions for specific tasks. This is useful for things that require you to see and check a lot of i/o and can be integrate with other modules I've [created](https://github.com/murphy214/berrl) to view the output of a dataframe easily.

This module currently makes a few residual assumptions from how I generally use it:
  * it assumes you have only **1 tif file** and a metadatafile in the folder input argument 

The module basically consists of two main functions. 
  * generate_band_extrema(folder,extrema)
    - where folder is directory in which your tif file and metadata file is located
    - and extrema is a python dict consisting of 'n','s','e',and 'w' headings for what range of data to grab from within the image
  * make_color_table(dataframe),[**within berrl module**] this function assuming you have an output of generate_band_extrema() that has been used with the berrl function map_color_table() which simply takes its RGB output columns and combines it into a hexidecimal color hash in a new column called "COLORKEY" this can then be sent into berrl to style the points/squares accordingly
  * make_square_table() from an output containing a colorkey of generate_band_extrema() returns a list of squares that can be sent into berrl to better visualize the approximated pixel locations and sizes 



```python 
import pandas as pd
import numpy as np
import berrl as bl
import raster_extract



# making image dataframe
data = raster_extract.make_image('b.tif')

# taking the red,green,blue fields and turing them into a color hash
data = bl.make_colorkey_table(data)

# making the geometries out of the point data
data = raster_extract.make_squares_table(data)
print data 
bl.make_blocks(data,list=True,filename='blocks.geojson')

bl.loadparsehtml(['blocks.geojson'],True,colorkey=True)
'''
OUTPUT:
        GEOHASH       LAT1       LONG1       LAT2       LONG2       LAT3  \
0       9q9js5x  37.549049 -122.157276  37.549049 -122.157002  37.549322   
1       9q9js5x  37.548912 -122.157276  37.548912 -122.157002  37.549185   
2       9q9js5x  37.548775 -122.157276  37.548775 -122.157002  37.549049   
3       9q9js5x  37.548638 -122.157276  37.548638 -122.157002  37.548912   
4       9q9js5x  37.548502 -122.157276  37.548502 -122.157002  37.548775   
5       9q9js5r  37.548365 -122.157276  37.548365 -122.157002  37.548638   
6       9q9js5r  37.548228 -122.157276  37.548228 -122.157002  37.548502   
7       9q9js5r  37.548092 -122.157276  37.548092 -122.157002  37.548365   
8       9q9js5r  37.547955 -122.157276  37.547955 -122.157002  37.548228   
9       9q9js5r  37.547818 -122.157276  37.547818 -122.157002  37.548092   
10      9q9js5r  37.547681 -122.157276  37.547681 -122.157002  37.547955   
11      9q9js5r  37.547545 -122.157276  37.547545 -122.157002  37.547818   
12      9q9js5r  37.547408 -122.157276  37.547408 -122.157002  37.547681   
13      9q9js5r  37.547271 -122.157276  37.547271 -122.157002  37.547545   
14      9q9js5r  37.547134 -122.157276  37.547134 -122.157002  37.547408   
15      9q9js5p  37.546998 -122.157276  37.546998 -122.157002  37.547271   
16      9q9js5p  37.546861 -122.157276  37.546861 -122.157002  37.547134   
17      9q9js5p  37.546724 -122.157276  37.546724 -122.157002  37.546998   
18      9q9js5p  37.546588 -122.157276  37.546588 -122.157002  37.546861   
19      9q9js5p  37.546451 -122.157276  37.546451 -122.157002  37.546724   
20      9q9js5p  37.546314 -122.157276  37.546314 -122.157002  37.546588   
21      9q9js5p  37.546177 -122.157276  37.546177 -122.157002  37.546451   
22      9q9js5p  37.546041 -122.157276  37.546041 -122.157002  37.546314   
23      9q9js5p  37.545904 -122.157276  37.545904 -122.157002  37.546177   
24      9q9js5p  37.545767 -122.157276  37.545767 -122.157002  37.546041   
25      9q9js4z  37.545630 -122.157276  37.545630 -122.157002  37.545904   
26      9q9js4z  37.545494 -122.157276  37.545494 -122.157002  37.545767   
27      9q9js4z  37.545357 -122.157276  37.545357 -122.157002  37.545630   
28      9q9js4z  37.545220 -122.157276  37.545220 -122.157002  37.545494   
29      9q9js4z  37.545084 -122.157276  37.545084 -122.157002  37.545357   
...         ...        ...         ...        ...         ...        ...   
215355  9q9jjz7  37.482191 -122.085853  37.482191 -122.085580  37.482464   
215356  9q9jjz7  37.482054 -122.085853  37.482054 -122.085580  37.482328   
215357  9q9jjz7  37.481917 -122.085853  37.481917 -122.085580  37.482191   
215358  9q9jjz7  37.481781 -122.085853  37.481781 -122.085580  37.482054   
215359  9q9jjz7  37.481644 -122.085853  37.481644 -122.085580  37.481917   
215360  9q9jjz7  37.481507 -122.085853  37.481507 -122.085580  37.481781   
215361  9q9jjz7  37.481370 -122.085853  37.481370 -122.085580  37.481644   
215362  9q9jjz7  37.481234 -122.085853  37.481234 -122.085580  37.481507   
215363  9q9jjz7  37.481097 -122.085853  37.481097 -122.085580  37.481370   
215364  9q9jjz5  37.480960 -122.085853  37.480960 -122.085580  37.481234   
215365  9q9jjz5  37.480824 -122.085853  37.480824 -122.085580  37.481097   
215366  9q9jjz5  37.480687 -122.085853  37.480687 -122.085580  37.480960   
215367  9q9jjz5  37.480550 -122.085853  37.480550 -122.085580  37.480824   
215368  9q9jjz5  37.480413 -122.085853  37.480413 -122.085580  37.480687   
215369  9q9jjz5  37.480277 -122.085853  37.480277 -122.085580  37.480550   
215370  9q9jjz5  37.480140 -122.085853  37.480140 -122.085580  37.480413   
215371  9q9jjz5  37.480003 -122.085853  37.480003 -122.085580  37.480277   
215372  9q9jjz5  37.479867 -122.085853  37.479867 -122.085580  37.480140   
215373  9q9jjz5  37.479730 -122.085853  37.479730 -122.085580  37.480003   
215374  9q9jjyg  37.479593 -122.085853  37.479593 -122.085580  37.479867   
215375  9q9jjyg  37.479456 -122.085853  37.479456 -122.085580  37.479730   
215376  9q9jjyg  37.479320 -122.085853  37.479320 -122.085580  37.479593   
215377  9q9jjyg  37.479183 -122.085853  37.479183 -122.085580  37.479456   
215378  9q9jjyg  37.479046 -122.085853  37.479046 -122.085580  37.479320   
215379  9q9jjyg  37.478909 -122.085853  37.478909 -122.085580  37.479183   
215380  9q9jjyg  37.478773 -122.085853  37.478773 -122.085580  37.479046   
215381  9q9jjyg  37.478636 -122.085853  37.478636 -122.085580  37.478909   
215382  9q9jjyg  37.478499 -122.085853  37.478499 -122.085580  37.478773   
215383  9q9jjyg  37.478363 -122.085853  37.478363 -122.085580  37.478636   
215384  9q9jjye  37.478226 -122.085853  37.478226 -122.085580  37.478499   

             LONG3       LAT4       LONG4    X    Y  RED  GREEN  BLUE COLORKEY  
0      -122.157276  37.549322 -122.157002    0    0    0      0     0  #000000  
1      -122.157276  37.549185 -122.157002    0    1    0      0     0  #000000  
2      -122.157276  37.549049 -122.157002    0    2    0      0     0  #000000  
3      -122.157276  37.548912 -122.157002    0    3    0      0     0  #000000  
4      -122.157276  37.548775 -122.157002    0    4    0      0     0  #000000  
5      -122.157276  37.548638 -122.157002    0    5    0      0     0  #000000  
6      -122.157276  37.548502 -122.157002    0    6    0      0     0  #000000  
7      -122.157276  37.548365 -122.157002    0    7    0      0     0  #000000  
8      -122.157276  37.548228 -122.157002    0    8    0      0     0  #000000  
9      -122.157276  37.548092 -122.157002    0    9    0      0     0  #000000  
10     -122.157276  37.547955 -122.157002    0   10    0      0     0  #000000  
11     -122.157276  37.547818 -122.157002    0   11    0      0     0  #000000  
12     -122.157276  37.547681 -122.157002    0   12    0      0     0  #000000  
13     -122.157276  37.547545 -122.157002    0   13    0      0     0  #000000  
14     -122.157276  37.547408 -122.157002    0   14    0      0     0  #000000  
15     -122.157276  37.547271 -122.157002    0   15    0      0     0  #000000  
16     -122.157276  37.547134 -122.157002    0   16    0      0     0  #000000  
17     -122.157276  37.546998 -122.157002    0   17    0      0     0  #000000  
18     -122.157276  37.546861 -122.157002    0   18    0      0     0  #000000  
19     -122.157276  37.546724 -122.157002    0   19    0      0     0  #000000  
20     -122.157276  37.546588 -122.157002    0   20    0      0     0  #000000  
21     -122.157276  37.546451 -122.157002    0   21    0      0     0  #000000  
22     -122.157276  37.546314 -122.157002    0   22    0      0     0  #000000  
23     -122.157276  37.546177 -122.157002    0   23    0      0     0  #000000  
24     -122.157276  37.546041 -122.157002    0   24    0      0     0  #000000  
25     -122.157276  37.545904 -122.157002    0   25    0      0     0  #000000  
26     -122.157276  37.545767 -122.157002    0   26    0      0     0  #000000  
27     -122.157276  37.545630 -122.157002    0   27    0      0     0  #000000  
28     -122.157276  37.545494 -122.157002    0   28    0      0     0  #000000  
29     -122.157276  37.545357 -122.157002    0   29    0      0     0  #000000  
...            ...        ...         ...  ...  ...  ...    ...   ...      ...  
215355 -122.085853  37.482464 -122.085580  414  489    0      0     0  #000000  
215356 -122.085853  37.482328 -122.085580  414  490    0      0     0  #000000  
215357 -122.085853  37.482191 -122.085580  414  491    0      0     0  #000000  
215358 -122.085853  37.482054 -122.085580  414  492    0      0     0  #000000  
215359 -122.085853  37.481917 -122.085580  414  493    0      0     0  #000000  
215360 -122.085853  37.481781 -122.085580  414  494    0      0     0  #000000  
215361 -122.085853  37.481644 -122.085580  414  495    0      0     0  #000000  
215362 -122.085853  37.481507 -122.085580  414  496    0      0     0  #000000  
215363 -122.085853  37.481370 -122.085580  414  497    0      0     0  #000000  
215364 -122.085853  37.481234 -122.085580  414  498    0      0     0  #000000  
215365 -122.085853  37.481097 -122.085580  414  499    0      0     0  #000000  
215366 -122.085853  37.480960 -122.085580  414  500    0      0     0  #000000  
215367 -122.085853  37.480824 -122.085580  414  501    0      0     0  #000000  
215368 -122.085853  37.480687 -122.085580  414  502    0      0     0  #000000  
215369 -122.085853  37.480550 -122.085580  414  503    0      0     0  #000000  
215370 -122.085853  37.480413 -122.085580  414  504    0      0     0  #000000  
215371 -122.085853  37.480277 -122.085580  414  505    0      0     0  #000000  
215372 -122.085853  37.480140 -122.085580  414  506    0      0     0  #000000  
215373 -122.085853  37.480003 -122.085580  414  507    0      0     0  #000000  
215374 -122.085853  37.479867 -122.085580  414  508    0      0     0  #000000  
215375 -122.085853  37.479730 -122.085580  414  509    0      0     0  #000000  
215376 -122.085853  37.479593 -122.085580  414  510    0      0     0  #000000  
215377 -122.085853  37.479456 -122.085580  414  511    0      0     0  #000000  
215378 -122.085853  37.479320 -122.085580  414  512    0      0     0  #000000  
215379 -122.085853  37.479183 -122.085580  414  513    0      0     0  #000000  
215380 -122.085853  37.479046 -122.085580  414  514    0      0     0  #000000  
215381 -122.085853  37.478909 -122.085580  414  515    0      0     0  #000000  
215382 -122.085853  37.478773 -122.085580  414  516    0      0     0  #000000  
215383 -122.085853  37.478636 -122.085580  414  517    0      0     0  #000000  
215384 -122.085853  37.478499 -122.085580  414  518    0      0     0  #000000  

[215385 rows x 15 columns]

'''
```
